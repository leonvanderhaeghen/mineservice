{"remainingRequest":"/workspace/mineservice/mineservice/vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/workspace/mineservice/mineservice/vue/node_modules/@tendermint/vue/src/components/SpTypeForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/workspace/mineservice/mineservice/vue/node_modules/@tendermint/vue/src/components/SpTypeForm.vue","mtime":499162500000},{"path":"/workspace/mineservice/mineservice/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspace/mineservice/mineservice/vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/workspace/mineservice/mineservice/vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/workspace/mineservice/mineservice/vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTcElucHV0IGZyb20gIi4vU3BJbnB1dCI7CmltcG9ydCBJY29uTG9hZGluZzIgZnJvbSAiLi9JY29uTG9hZGluZzIiOwppbXBvcnQgU3BIMyBmcm9tICIuL1NwSDMiOwppbXBvcnQgU3BCdXR0b24gZnJvbSAiLi9TcEJ1dHRvbiI7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgfSwKICAgIGZpZWxkczogewogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwKICAgIH0sCiAgICBwcmVmbGlnaHQ6IHsKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiAob2JqKSA9PiBvYmo7CiAgICAgIH0sCiAgICB9LAogICAgbW9kdWxlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgIH0sCiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBTcElucHV0LAogICAgSWNvbkxvYWRpbmcyLAogICAgU3BIMywKICAgIFNwQnV0dG9uLAogIH0sCiAgZGF0YTogZnVuY3Rpb24oKSB7CiAgICByZXR1cm4gewogICAgICBmaWVsZHNMaXN0OiB7fSwKICAgICAgZmxpZ2h0OiBmYWxzZSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgKHRoaXMuZmllbGRzIHx8IFtdKS5mb3JFYWNoKChmaWVsZCkgPT4gewogICAgICB0aGlzLiRzZXQodGhpcy5maWVsZHNMaXN0LCBmaWVsZCwgIiIpOwogICAgfSk7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY29zbW9zL2VudGl0eUZldGNoIiwgewogICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgIG1vZHVsZTogdGhpcy5tb2R1bGUsCiAgICB9KTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNBZGRyZXNzKCkgewogICAgICByZXR1cm4gISF0aGlzLiRzdG9yZS5zdGF0ZS5jb3Ntb3MuYWNjb3VudC5hZGRyZXNzOwogICAgfSwKICAgIGluc3RhbmNlTGlzdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvc21vcy5kYXRhW2Ake3RoaXMubW9kdWxlfS8ke3RoaXMudHlwZX1gXSB8fCBbXTsKICAgIH0sCiAgICB2YWxpZCgpIHsKICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5maWVsZHNMaXN0KS5ldmVyeSgoZWwpID0+IHsKICAgICAgICByZXR1cm4gZWwudHJpbSgpLmxlbmd0aCA+IDA7CiAgICAgIH0pOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHRpdGxlKHN0cmluZykgewogICAgICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpOwogICAgfSwKICAgIGFzeW5jIHN1Ym1pdCgpIHsKICAgICAgaWYgKHRoaXMudmFsaWQgJiYgIXRoaXMuZmxpZ2h0ICYmIHRoaXMuaGFzQWRkcmVzcykgewogICAgICAgIHRoaXMuZmxpZ2h0ID0gdHJ1ZTsKICAgICAgICBjb25zdCBwYXlsb2FkID0gewogICAgICAgICAgdHlwZTogdGhpcy50eXBlLAogICAgICAgICAgYm9keTogdGhpcy5wcmVmbGlnaHQodGhpcy5maWVsZHNMaXN0KSwKICAgICAgICAgIG1vZHVsZTogdGhpcy5tb2R1bGUsCiAgICAgICAgfTsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY29zbW9zL2VudGl0eVN1Ym1pdCIsIHBheWxvYWQpOwogICAgICAgIGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJjb3Ntb3MvZW50aXR5RmV0Y2giLCB7CiAgICAgICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgICAgICBib2R5OiB0aGlzLmZpZWxkc0xpc3QsCiAgICAgICAgICBtb2R1bGU6IHRoaXMubW9kdWxlLAogICAgICAgIH0pOwogICAgICAgIHRoaXMuZmxpZ2h0ID0gZmFsc2U7CiAgICAgICAgT2JqZWN0LmtleXModGhpcy5maWVsZHNMaXN0KS5mb3JFYWNoKChmKSA9PiB7CiAgICAgICAgICB0aGlzLmZpZWxkc0xpc3RbZl0gPSAiIjsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["SpTypeForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpTypeForm.vue","sourceRoot":"node_modules/@tendermint/vue/src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"container\">\n      <sp-h3>New {{ type }}</sp-h3>\n      <div v-for=\"field in fields\" :key=\"field\">\n        <sp-input\n          v-model=\"fieldsList[field]\"\n          type=\"text\"\n          :placeholder=\"title(field)\"\n          :disabled=\"flight\"\n        />\n      </div>\n      <div class=\"button\">\n        <sp-button\n          :loading=\"flight\"\n          :disabled=\"!valid || !hasAddress || flight\"\n          @click=\"submit\"\n        >\n          Create {{ type }}\n        </sp-button>\n      </div>\n      <sp-h3\n        >List of {{ type }} items {{ module && `in module ${module}` }}</sp-h3\n      >\n      <div class=\"item\" v-for=\"instance in instanceList\" :key=\"instance.id\">\n        <div class=\"item__field\" v-for=\"(value, key) in instance\" :key=\"key\">\n          <div class=\"item__field__key\">{{ key }}:</div>\n          <div class=\"item__field__value\">\n            {{ value }}\n          </div>\n        </div>\n      </div>\n      <div class=\"card__empty\" v-if=\"instanceList.length < 1\">\n        There are no {{ type }} items yet. Create one using the form.\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n@import url(\"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;531;600;700;800&display=swap\");\n\n.container {\n  font-family: \"Inter\";\n}\n.button {\n  display: inline-block;\n}\n.item {\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.1);\n  margin-bottom: 1rem;\n  padding: 1rem;\n  border-radius: 0.5rem;\n  overflow: hidden;\n}\n.item__field {\n  display: grid;\n  line-height: 1.5;\n  grid-template-columns: 15% 1fr;\n  grid-template-rows: 1fr;\n  word-break: break-all;\n}\n.item__field__key {\n  color: rgba(0, 0, 0, 0.25);\n  word-break: keep-all;\n  overflow: hidden;\n}\n.card__empty {\n  margin-bottom: 1rem;\n  border: 1px dashed rgba(0, 0, 0, 0.1);\n  padding: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  border-radius: 8px;\n  color: rgba(0, 0, 0, 0.25);\n  text-align: center;\n  min-height: 8rem;\n}\n</style>\n\n<script>\nimport SpInput from \"./SpInput\";\nimport IconLoading2 from \"./IconLoading2\";\nimport SpH3 from \"./SpH3\";\nimport SpButton from \"./SpButton\";\n\nexport default {\n  props: {\n    type: {\n      type: String,\n    },\n    fields: {\n      default: () => [],\n    },\n    preflight: {\n      default: () => {\n        return (obj) => obj;\n      },\n    },\n    module: {\n      type: String,\n    },\n  },\n  components: {\n    SpInput,\n    IconLoading2,\n    SpH3,\n    SpButton,\n  },\n  data: function() {\n    return {\n      fieldsList: {},\n      flight: false,\n    };\n  },\n  created() {\n    (this.fields || []).forEach((field) => {\n      this.$set(this.fieldsList, field, \"\");\n    });\n    this.$store.dispatch(\"cosmos/entityFetch\", {\n      type: this.type,\n      module: this.module,\n    });\n  },\n  computed: {\n    hasAddress() {\n      return !!this.$store.state.cosmos.account.address;\n    },\n    instanceList() {\n      return this.$store.state.cosmos.data[`${this.module}/${this.type}`] || [];\n    },\n    valid() {\n      return Object.values(this.fieldsList).every((el) => {\n        return el.trim().length > 0;\n      });\n    },\n  },\n  methods: {\n    title(string) {\n      return string.charAt(0).toUpperCase() + string.slice(1);\n    },\n    async submit() {\n      if (this.valid && !this.flight && this.hasAddress) {\n        this.flight = true;\n        const payload = {\n          type: this.type,\n          body: this.preflight(this.fieldsList),\n          module: this.module,\n        };\n        await this.$store.dispatch(\"cosmos/entitySubmit\", payload);\n        await this.$store.dispatch(\"cosmos/entityFetch\", {\n          type: this.type,\n          body: this.fieldsList,\n          module: this.module,\n        });\n        this.flight = false;\n        Object.keys(this.fieldsList).forEach((f) => {\n          this.fieldsList[f] = \"\";\n        });\n      }\n    },\n  },\n};\n</script>\n"]}]}